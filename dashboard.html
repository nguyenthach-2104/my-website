<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Báo cáo khách hàng</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <style>
        body { padding: 20px; }
        .filter-bar { margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .toggle-row { cursor: pointer; font-weight: bold; }
        .detail-row { display: none; }
        .total-row { font-weight: bold; background-color: #e9ecef; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/vn.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0/dist/chartjs-plugin-datalabels.min.js"></script>
</head>
<body>
    <h1>Báo cáo khách hàng</h1>

    <!-- Thanh công cụ -->
    <div class="filter-bar">
        <label for="startDate">Ngày bắt đầu:</label>
        <input type="text" id="startDate" placeholder="dd/mm/yyyy">
        <label for="endDate">Ngày kết thúc:</label>
        <input type="text" id="endDate" placeholder="dd/mm/yyyy">
        <label for="teamSelect">Phòng:</label>
        <select id="teamSelect"></select>
        <button onclick="filterData()">Lọc dữ liệu</button>
    </div>

    <!-- Section I: Tổng chỉ số -->
    <h2>I. Tổng chỉ số</h2>
    <table id="summaryTable">
        <thead>
            <tr>
                <th>STT</th>
                <th>TÊN NV</th>
                <th>KH TIỀM NĂNG</th>
                <th>KÝ MỚI</th>
                <th>XHĐ</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <!-- Section II: Thống kê khách hàng theo khu vực -->
    <h2>II. Thống kê khách hàng theo khu vực</h2>
    <table id="regionTable">
        <thead>
            <tr>
                <th>STT</th>
                <th>TỈNH</th>
                <th>KH TIỀM NĂNG</th>
                <th>KÝ</th>
                <th>XUẤT</th>
                <th>TỈ LỆ KÝ MỚI</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <!-- Biểu đồ tỉ trọng giữa các khu vực -->
    <h3>Tỉ trọng KH TIỀM NĂNG giữa các khu vực</h3>
    <canvas id="regionChart" width="400" height="200"></canvas>

    <!-- Section III: Thống kê theo loại xe -->
    <h2>III. Thống kê theo loại xe</h2>
    <table id="vehicleTypeTable">
        <thead>
            <tr>
                <th>STT</th>
                <th>LOẠI XE</th>
                <th>KH TIỀM NĂNG</th>
                <th>KÝ</th>
                <th>XUẤT</th>
                <th>TỈ LỆ KÝ MỚI</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <!-- Biểu đồ tỉ trọng KÝ HĐ -->
    <h3>Tỉ trọng KÝ HĐ giữa các loại xe</h3>
    <canvas id="vehicleTypeChartSigned" width="400" height="200"></canvas>

    <!-- Biểu đồ tỉ trọng XHĐ -->
    <h3>Tỉ trọng XHĐ giữa các loại xe</h3>
    <canvas id="vehicleTypeChartXhd" width="400" height="200"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/dashboard.js"></script>
</body>
</html>